#### Background

最短路径更多的是针对一张有向有权图$G=(V,E)$，图中存在某条路径：
$$
p=<v_0,v_1,...,v_k>
$$
则其路径的权重则为点集合对应的边权之和：
$$
w(p)=\sum_{i=1}^{k} w\left(v_{i-1}, v_{i}\right)
$$
所以定义最短路径则应对“最短”进一步限制：
$$
\delta(u, v)=\left\{\begin{array}{l}
\min \{w(p): u \stackrel{p}{\sim} v\} \\
\infty
\end{array}\right.
$$
路径不存在即为无穷（看待为不在同一棵搜索树即可）。

##### 问题分类

单源最短路径表示的是对一个目标点`u`求解其到图中任意点的最短路径，根据这一思想还能继续解决此类问题：

- 单目的地最短路径：图中边进行方向翻转；
- 单节点对最短路径：其属于单源最短路径解决问题的子集；
- 所有节点对最短路径：针对所有点做单源最短路径；

##### 最优子结构

> [引理]最短路径的子路径也是最短路径：给定带权有向图$G=(V,E)$中，上述路径$p_{0k}$为$v_0$到$v_k$的最短路径，对于$0\le i\le j\le k$使得存在$p_{ij}$为$v_i$到$v_j$的最短路径且为最短子路径。

根据上述分割路径权重$w(p_{0k})$可分解为：
$$
w(p_{0k})=w\left(p_{0 i}\right)+w\left(p_{i j}\right)+w\left(p_{j k}\right)
$$
现在假设存在一条$v_i$到$v_j$的最短路径:
$$
w'(p_{ij})<w(p_{ij})
$$
则会有：
$$
w'(p_{0k})=w\left(p_{0 i}\right)+w'\left(p_{i j}\right)+w\left(p_{j k}\right)
$$
使得原命题的最短路径被压缩，与其是最短路径相矛盾，所以引理成立。

##### 负权

在图$G=(V,E)$中的边权函数满足$w(e)\in R$，所以存在负权重环路的可能性，这时进行最短路查询时若在图中某环路为负权，由于最短路查询并不是欧拉图或哈密顿路径，所以边点都可以无限遍历，所以这就造成了在环路中存在无限循环降低权重的情况：

<img src="C:\Users\SSW\Desktop\-.png" style="zoom:25%;" />

例如：
$$
p_{se}=<s,e>
$$
同时存在$ef$环路，所以问题还能进行循环：
$$
p_{se}=<s,e,f,e,...>
$$
这将使得$w(p_{se})$没有一个准确的下界，所以这类问题将最终最短路径值数值定义为$-\infty$，理论则认为其无定义。

##### 环路

上述负权表述的是最短路中不能包含负权值得边，此刻注意针对的是”最短路不包含“，因为可能会带来问题：

- 存在负权边但环路权值为正数，此类情况并不会对某点造成结果的下降；
- 存在负权边且环路权值为负数，此类情况上述说明无定义，所以最短路并不包含其环路；

那么现在存在的问题是不存在负权边，且总权值为正数的环路是否可以被包含在最短路中，结论为：若最短路包含其环路，总可以通过取消经历这条环路的方法来将答案进行缩小，使其是最短路矛盾，所以正环路也不被最短路包含。

同理，针对权值为0的环路，针对上述正环路的操作，0环路的添加与否不会对最短路造成数量的变化，更多的情况下最短路并不希望添加一条或多条毫无意义的环路，但少数情况下存在意义。

##### 最短路径表示

带权最短路径更多的是对广度优先搜索针对带权边做了一定程度的修正，所以路径表示依旧可以沿用基本图算法中的路径描述方法。

更多的最短路算法在带权图中想追求的是深度优先搜索所形成的前驱子图$G_\pi=(V_\pi,E_\pi)$，最短路径树是一棵以目标点为根节点的树，若只包含有定义的最短路，则其图$G'=(V',E')$，其中点集边集均为原始图的子集且满足：

- $V'$是图中从源节点可以到达的所有节点集合；
- $G'$为一棵根节点为源节点的树；
- 对于其$G'$中的源节点到某节点的简单路径为图$G$中的两点间的最短路径。

但最短只针对数值，而不确定其唯一性，数值相等情况下最短路径树可以为多条。

<img src="C:\Users\SSW\Desktop\ba.png" style="zoom:25%;" />

##### 松弛操作

松弛操作又可以理解为一种三角优化操作，若存在情况：
$$
v.d>u.d+w(u,v)\\
$$
则可以理解为用一条更短的并同样可以到达的边优化这条边$v.d$的值：
$$
v.d=u.d+w(u,v)\\
$$
松弛操作：将前期最短路径估计`v.d`作为一个上界，寻找其余的松弛条件优化边到无法操作，这是不同于单位边宽度优先搜索的思想，但并不是每条边都需要被变更，即找到”符合条件“的情形即可。

![](C:\Users\SSW\Desktop\s.png)

左图说明进行了对上界的松弛，右图未满足要求则没有。