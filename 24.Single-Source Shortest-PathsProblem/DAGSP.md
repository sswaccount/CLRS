##### DAG最短路径算法

在有向无环图中构造制定目标点的最短路径算法中，首先针对有向无环图想到的问题是22章基础图算法中的拓扑排序。

在排序之后可以得到一个线性的序列，其中特性是：根据节点变为黑色状态的时间先后进行排序，换句话说是根据节点何时结束搜索树进行排序。具体为图像表达为在有向无环图的线性结构展示中，所有的有向边的指向方向都是相同的。

另一点较为重要的问题是：无环图中虽然可以存在负权边但绝对不存在环那么也就不存在负权环边。

![](C:\Users\SSW\Desktop\eg.png)

上图为拓扑排序表述的结果，文字表达为：

```
r -- s -- t -- x -- y -- z
```

配合图像理解一种有向无环图的最短路径算法：

- 对图进行拓扑排序；
- 初始化某点为`SSSP`的源节点；
- 由没有入度的节点开始线性顺序依次做相应所有临边的松弛操作；

例子表示使用`s`作为源节点进行操作：

<img src="C:\Users\SSW\Desktop\DAG.png" style="zoom:25%;" />

其中程序描述为：

```cpp
void Graph::DagShortestPath(string s)
{
    DFS(true);
    InitializeSingleSource(s);
    for (auto u : topo)
        for (auto v = G[index[u]]._first; v;v=v->NEXT)
            Relax(u, v->adjvex);
}
```

检查操作后结果为：

```
r 10000
s 0
t 2
x 6
y 5
z 3
```

##### 算法分析

10000为定义的极大值（正无穷），有向无环图的拓扑排序操作时间复杂度为：：

- 拓扑排序：$O(V+E)$
- 初始化：$O(V)$
- 遍历每个点的每条边，松弛为常数时间：$O(E)$

综合得出该方法时间复杂度为$O(V+E)$。

##### 算法正确性

> [定理]带权有向无环图$G=(V,E)$源节点为`s`，在算法`DagShortestPath`终止时，对于其他节点均有结论$v.d=\delta(s,v)$，且前驱子图是一棵最短路径树。

证明正确性需要前提性质辅助验证，在CLRS话题中后期更新。

##### 应用

PERT网络分析法 (Program Evaluation and Review Technique) 即 “计划评估和审查技术”。简单地说，它能协调整个计划的各道工序，合理安排人力、物力、时间、资金，加速计划的完成。在现代计划的编制和分析手段上，PERT 被广泛的使用，是现代化管理的重要手段和方法。

数学语言描述PERT是一个有向无环图，在图中每条边代表某一项工作，对应边权表示工作所需要的时间，且节点之间有相互依赖关系，只有将前驱工作（边）都完成才能进行下一个工作。

该最短路方法能判断PERT图中关键路径，其关键路径的意义就是”何时能将任务全部完成“（遍历所有节点），这里提供两个思路：

1. 将所有权重变为负数，这样最短路径变为最长路径即可，此处等同在大根堆中使所有元素变为负数之后当作小根堆使用。
2. 在使用最短路方法中，将松弛符号反向变换，使得思想转换为：”要大不要小“。

